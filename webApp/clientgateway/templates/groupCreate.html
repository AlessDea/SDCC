{% extends 'base.html' %}

{% block title %} Group Create {% endblock %}

{% block content %}

<script>
    document.getElementById("groupcreate").style.backgroundColor = "#C5C5C5";
    document.getElementById("groupcreate").style.color = "black";
</script>

  <div class="w3-monospace " style="background-color:white;border-radius: 8px;">

    <div>

      <header class="w3-container" style="background-color:#333333;">
        <h2 class="w3-monospace" style=color:white>Create a new Group</h2>
      </header>

      <div id="myDIV" class="header" style="margin-left: 30px">
        <h2>Enter the members of the group one by one:</h2>
        <input type="email" style="height: 50px; border-radius: 5px;" id="myInput" placeholder="Email...">
        <span onclick="newElement()" class="button button2">Add</span>
      </div>

      <script>
        function newElement() {

          var li = document.createElement("li");
          var inputValue = document.getElementById("myInput").value;
          var t = document.createTextNode(inputValue);
          li.appendChild(t);

          if (inputValue === '') {
            alert("You must write something!");
          } else {
            document.getElementById("counter").value = parseInt(document.getElementById("counter").value) + 1;
            document.getElementById("myUL").appendChild(li);
            var form = document.getElementById("info");
            var input = document.createElement("input")
            input.setAttribute('name', 'username'+ document.getElementById("counter").value);
            input.setAttribute('value', inputValue);
            input.setAttribute('type', 'hidden');
            form.appendChild(input)
          }
          document.getElementById("myInput").value = "";
        }
      </script>

    </div>

    <form id="info" method="post">
      <input type="hidden" id="counter" name="counter" value="0">

      <div class="w3-container" style="margin-left: 12px; margin-right: 12px;">
        <ul name="ul" id="myUL" class="w3-ul w3-card-4" style="border-radius: 5px; color: white;">

        </ul>
      </div>

      <div id="myDIV" class="header" style="margin-left:30px;">
        <input type="text" style="height: 50px; border-radius: 5px; margin-bottom: 30px;" id="group_name" name ="group_name" placeholder="Group name..." required="required">
        <button class="button button2" name="submit" value="get_list">Create Group</button>
      </div>
    </form>

  </div>
    
  <!-- UTILIZZABILE PER IL MESSAGGIO DI CONFERMA DELLA CREAZIONE O DI ERRORE -->
  {% for message in get_flashed_messages() %}
    <div class="alert w3-monospace">{{ message }}</div>
  {% endfor %}

{% endblock %}